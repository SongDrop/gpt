2025-07-19 13:04:45,372 - config - INFO - Starting configutation initialization...
2025-07-19 13:04:45,373 - config - INFO - .env file found at: /Users/gabrielmajorsky/Documents/dev-json/unrealstudio3/__________win10dev.xyz/gpt/gpt/backend/.env
2025-07-19 13:04:45,373 - config - INFO - Working directory: /Users/gabrielmajorsky/Documents/dev-json/unrealstudio3/__________win10dev.xyz/gpt/gpt/backend
2025-07-19 13:04:45,373 - config - INFO - .env path resolved: /Users/gabrielmajorsky/Documents/dev-json/unrealstudio3/__________win10dev.xyz/gpt/gpt/backend/.env
2025-07-19 13:04:45,374 - config - INFO - .env exists: True
2025-07-19 13:04:45,389 - config - INFO - Loading settings...
2025-07-19 13:04:45,409 - config - INFO - Loaded configuration:
2025-07-19 13:04:45,409 - config - INFO - App Name: AI Chat Assistant
2025-07-19 13:04:45,409 - config - INFO - Environment: production
2025-07-19 13:04:45,409 - config - INFO - CORS Origins: ['http://localhost:3000', 'https://localhost:8000', 'http://localhost:8000', 'https://localhost:3000']
2025-07-19 13:04:45,409 - config - INFO - Vector Search Enabled: True
2025-07-19 13:04:45,409 - config - INFO - Vector Search Endpoint: https://ragaisearchrtx.search.windows.net/
2025-07-19 13:04:45,409 - config - INFO - Vector Search Key: ***LRZH
2025-07-19 13:04:45,409 - config - INFO - Vector Search Index: rag-1752519055977
2025-07-19 13:04:45,410 - config - INFO - Vector Search Embedding Deployment: text-embedding-ada-002
2025-07-19 13:04:45,410 - config - INFO - Vector Search Embedding Key: ***Hc9F
2025-07-19 13:04:45,410 - config - INFO - Vector search is enabled
2025-07-19 13:04:45,410 - config - INFO - Final vector search configuration check:
2025-07-19 13:04:45,410 - config - INFO - Vector Search Enabled: True
2025-07-19 13:04:45,410 - config - INFO - Vector Search Endpoint: https://ragaisearchrtx.search.windows.net/
2025-07-19 13:04:45,410 - config - INFO - Vector Search Key: ***LRZH
2025-07-19 13:04:45,411 - config - INFO - Vector Search Index: rag-1752519055977
2025-07-19 13:04:46,600 - main - INFO - Starting application initialization...
2025-07-19 13:04:46,657 - main - INFO - Configured CORS origins: ['http://localhost:3000', 'https://localhost:8000', 'http://localhost:8000', 'https://localhost:3000']
INFO:     Started server process [3183]
INFO:     Waiting for application startup.
2025-07-19 13:04:46,671 - main - INFO - Validating OpenAI configuration...
2025-07-19 13:04:46,671 - main - INFO - API Base: https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2025-01-01-preview
2025-07-19 13:04:46,671 - main - INFO - API Version: 2025-01-01-preview
2025-07-19 13:04:46,671 - main - INFO - Deployment Name: gpt-4.1-mini
2025-07-19 13:04:47,719 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:04:47,727 - main - INFO - OpenAI configuration validated successfully
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:49530 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49530 - "GET /health HTTP/1.1" 200 OK
2025-07-19 13:05:05,588 - main - INFO - WebSocket connection attempt from 127.0.0.1:49532
INFO:     ('127.0.0.1', 49532) - "WebSocket /ws" [accepted]
2025-07-19 13:05:05,589 - main - INFO - Client 127.0.0.1:49532 connected. Active connections: 1
INFO:     connection open
INFO:     127.0.0.1:49534 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49534 - "GET /health HTTP/1.1" 200 OK
2025-07-19 13:05:06,427 - main - INFO - WebSocket connection attempt from 127.0.0.1:49536
INFO:     ('127.0.0.1', 49536) - "WebSocket /ws" [accepted]
2025-07-19 13:05:06,428 - main - INFO - Client 127.0.0.1:49536 connected. Active connections: 2
INFO:     connection open
2025-07-19 13:05:35,602 - main - INFO - Received WebSocket message
2025-07-19 13:05:35,885 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:05:36,011 - main - INFO - Client 127.0.0.1:49532 disconnected. Active connections: 1
2025-07-19 13:05:36,011 - main - INFO - Connection cleaned up for 127.0.0.1:49532
2025-07-19 13:05:36,011 - main - ERROR - Unexpected error for 127.0.0.1:49532: WebSocket is not connected. Need to call "accept" first.
2025-07-19 13:05:36,011 - main - INFO - Client 127.0.0.1:49532 disconnected. Active connections: 1
2025-07-19 13:05:36,011 - main - INFO - Connection cleaned up for 127.0.0.1:49532
2025-07-19 13:05:36,011 - main - INFO - Client 127.0.0.1:49532 disconnected. Active connections: 1
INFO:     connection closed
2025-07-19 13:05:36,668 - main - INFO - Received WebSocket message
2025-07-19 13:05:36,819 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:05:36,918 - main - INFO - Client 127.0.0.1:49536 disconnected. Active connections: 0
2025-07-19 13:05:36,918 - main - INFO - Connection cleaned up for 127.0.0.1:49536
2025-07-19 13:05:36,918 - main - ERROR - Unexpected error for 127.0.0.1:49536: WebSocket is not connected. Need to call "accept" first.
2025-07-19 13:05:36,918 - main - INFO - Client 127.0.0.1:49536 disconnected. Active connections: 0
2025-07-19 13:05:36,918 - main - INFO - Connection cleaned up for 127.0.0.1:49536
2025-07-19 13:05:36,918 - main - INFO - Client 127.0.0.1:49536 disconnected. Active connections: 0
INFO:     connection closed
2025-07-19 13:05:37,473 - main - INFO - WebSocket connection attempt from 127.0.0.1:49546
INFO:     ('127.0.0.1', 49546) - "WebSocket /ws" [accepted]
2025-07-19 13:05:37,474 - main - INFO - Client 127.0.0.1:49546 connected. Active connections: 1
INFO:     connection open
2025-07-19 13:05:38,130 - main - INFO - WebSocket disconnected: 127.0.0.1:49546
2025-07-19 13:05:38,130 - main - INFO - Client 127.0.0.1:49546 disconnected. Active connections: 0
2025-07-19 13:05:38,130 - main - INFO - Connection cleaned up for 127.0.0.1:49546
2025-07-19 13:05:38,130 - main - INFO - Client 127.0.0.1:49546 disconnected. Active connections: 0
INFO:     connection closed
INFO:     127.0.0.1:49549 - "OPTIONS /chat HTTP/1.1" 200 OK
2025-07-19 13:06:18,435 - main - INFO - Received chat request
2025-07-19 13:06:18,438 - main - INFO - Not using vector search for this chat request
2025-07-19 13:06:21,635 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:06:21,636 - main - INFO - Successfully processed chat request
INFO:     127.0.0.1:49549 - "POST /chat HTTP/1.1" 200 OK
INFO:     127.0.0.1:49573 - "OPTIONS /chat HTTP/1.1" 200 OK
2025-07-19 13:07:08,135 - main - INFO - Received chat request
2025-07-19 13:07:08,140 - main - INFO - Not using vector search for this chat request
2025-07-19 13:07:14,669 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:07:14,670 - main - INFO - Successfully processed chat request
INFO:     127.0.0.1:49573 - "POST /chat HTTP/1.1" 200 OK
INFO:     127.0.0.1:49592 - "OPTIONS /chat HTTP/1.1" 200 OK
2025-07-19 13:08:13,436 - main - INFO - Received chat request
2025-07-19 13:08:13,439 - main - INFO - Not using vector search for this chat request
2025-07-19 13:08:19,093 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:08:19,094 - main - INFO - Successfully processed chat request
INFO:     127.0.0.1:49592 - "POST /chat HTTP/1.1" 200 OK
INFO:     127.0.0.1:49600 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49602 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49609 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49610 - "GET /health HTTP/1.1" 200 OK
2025-07-19 13:10:13,909 - main - INFO - WebSocket connection attempt from 127.0.0.1:49612
INFO:     ('127.0.0.1', 49612) - "WebSocket /ws" [accepted]
2025-07-19 13:10:13,909 - main - INFO - Client 127.0.0.1:49612 connected. Active connections: 1
INFO:     connection open
INFO:     127.0.0.1:49613 - "OPTIONS /chat HTTP/1.1" 200 OK
2025-07-19 13:10:13,920 - main - INFO - Received chat request
2025-07-19 13:10:13,923 - main - INFO - Not using vector search for this chat request
2025-07-19 13:10:20,648 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:10:20,649 - main - INFO - Successfully processed chat request
INFO:     127.0.0.1:49613 - "POST /chat HTTP/1.1" 200 OK
2025-07-19 13:10:44,240 - main - INFO - Received WebSocket message
2025-07-19 13:10:44,512 - httpx - INFO - HTTP Request: POST https://gabz-mb97c15u-swedencentral.cognitiveservices.azure.com/openai/deployments/gpt-4.1-mini/chat/completions?api-version=2024-05-01-preview "HTTP/1.1 200 OK"
2025-07-19 13:10:44,604 - main - INFO - Client 127.0.0.1:49612 disconnected. Active connections: 0
2025-07-19 13:10:44,604 - main - INFO - Connection cleaned up for 127.0.0.1:49612
2025-07-19 13:10:44,605 - main - ERROR - Unexpected error for 127.0.0.1:49612: WebSocket is not connected. Need to call "accept" first.
2025-07-19 13:10:44,605 - main - INFO - Client 127.0.0.1:49612 disconnected. Active connections: 0
2025-07-19 13:10:44,605 - main - INFO - Connection cleaned up for 127.0.0.1:49612
2025-07-19 13:10:44,605 - main - INFO - Client 127.0.0.1:49612 disconnected. Active connections: 0
INFO:     connection closed
2025-07-19 13:10:45,617 - main - INFO - WebSocket connection attempt from 127.0.0.1:49617
INFO:     ('127.0.0.1', 49617) - "WebSocket /ws" [accepted]
2025-07-19 13:10:45,617 - main - INFO - Client 127.0.0.1:49617 connected. Active connections: 1
INFO:     connection open
